<template name="ntpEpiMain">
  {{#if Template.subscriptionsReady}}
    {{#contentContainer}}
      {{> ntpEpiDescTbl}}
    {{/contentContainer}}
  {{else}}
    {{> isLoading}}
  {{/if }}
</template>


<template name="ntpEpiDescOpts">
  {{#actionBtn}}
      {{#if userCanEdit}}
        {{#unless showNew}}
          {{> optCreate }}
        {{/unless}}
        {{> optReorder }}
      {{/if}}
      {{> optMonoRefList}}
      {{> optFullScreen}}
      {{> optExcel }}
      {{> optWord }}
      {{> optRiskPlot}}
      {{> optShowAllRows}}
      {{> optQaFlags}}
  {{/actionBtn}}
</template>


<template name="ntpEpiDescTbl">
  <h1>{{name}} {{> ntpEpiDescOpts}}</h1>
  {{> tableTitle}}
  <table class="evidenceTable table table-compressed">
    <colgroup>
      <col width="15%">
      <col width="15%">
      <col width="10%">
      <col width="11%">
      <col width="06%">
      <col width="12%">
      <col width="10%">
      <col width="21%">
    </colgroup>
    <thead>
      <tr>
        <th>Reference, location, follow-up/enrollment period, study-design</th>
        <th>Population size, description, exposure assessment method</th>
        <th>Organ site<br>(ICD code)</th>
        <th>Exposure category<br> or level</th>
        <th>Exposed<br>cases/<br>deaths</th>
        <th class="riskTR">Risk estimate<br>(95% CI)</th>
        <th>Covariates controlled</th>
        <th>Comments</th>
      </tr>
    </thead>
    <tbody id="sortable">
      {{#each object_list}}
        {{> ntpEpiDescriptiveRow}}
      {{else}}
        <tr>
          <td colspan="100">No data has been entered into this table.</td>
        </tr>
      {{/each}}
    </tbody>
  </table>

  {{> showNewBtn }}

  {{#if showNew}}
    {{> ntpEpiDescriptiveForm isNew=true}}
  {{/if}}
</template>


<template name="ntpEpiDescriptiveRow">
  {{#if showRow isHidden}}
    <tr class="menu-autohide {{#if isHidden}}hiddenRow{{/if}}"
        data-id="{{_id}}"
        data-sortIdx="{{sortIdx}}">
      {{#if isEditing}}
        <td id="editingRow" colspan="100">
          {{> ntpEpiDescriptiveForm this isNew=false}}
        </td>
      {{else}}
        {{> ntpEpiDescriptiveTds}}
      {{/if}}
    </tr>
  {{/if}}
</template>


<template name="ntpEpiDescriptiveTds">
  <td>1</td>
  <td>2</td>
  <td>3</td>
  <td>4</td>
</template>


<template name="ntpEpiDescriptiveForm">
  <form id="mainForm" role="form" class="editForm">
    <legend>Epidemiological study description {{>formLegendPulldown}}</legend>
    <p class="help-block">Hover-over field labels for more descriptive text. Fields marked with an asterisk (<b>*</b>) are required.</p>

    <!-- TODO: add content THURS -->

    <div id="errors"></div>
    {{> qaNotice}}
    {{> evidenceFormSubmissionDiv }}
  </form>
</template>
