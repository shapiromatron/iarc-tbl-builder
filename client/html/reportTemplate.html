<template name="reportTemplateModal">
  <div class="modal fade" id="reportTemplateModal" tabindex="-1" role="dialog"
       aria-labelledby="reportTemplateModal" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">

        <div class="modal-header">
          <h4 class="modal-title">Create Microsoft Word report</h4>
        </div>

        <div class="modal-body">
          <form>
            <label>Select report template</label>
            {{> selectList options=getTemplateOptions selectName="filename" }}
          </form>
        </div>

        <div class="modal-footer">
            <button type="button" class="btn btn-sm btn-primary"
                    id="download" title="Download report" data-dismiss="modal">
                    <span class="fa fa-download"></span> Download</button>
            <button type="button" class="btn btn-sm btn-default"
                    id="cancel" title="Cancel" data-dismiss="modal">Cancel</button>
        </div>

      </div>
    </div>
  </div>
</template>

<template name="reportTemplateTable">
  <h1>Microsoft Word Report Templates
    <div class="btn-group pull-right">
      <button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown">
        <span class="caret" title="Editing options"></span>
      </button>
      <ul class="dropdown-menu">
        <li><a href="#" id="show-create"><span class="glyphicon glyphicon-plus"></span> Load new</a></li>
      </ul>
    </div>
  </h1>

  {{#if showNew}}
    {{> reportTemplateForm}}
  {{/if}}

  <table class="table table-compressed table-hover">
    <colgroup>
      <col width="50%">
      <col width="50%">
    </colgroup>
    <thead>
      <tr>
        <th>Filename</th>
        <th>Data Type</th>
      </tr>
    </thead>
    <tbody>
      {{#each getReportTemplates}}
          <tr class="menu-autohide">
            {{#if isEditing}}
              <td id="editingRow" colspan="100">
                {{> reportTemplateForm this}}
              </td>
            {{else}}
                {{> reportTemplateRow this}}
            {{/if}}
          </tr>
      {{/each}}
    </tbody>
  </table>
</template>

<template name="reportTemplateRow">
  <td>
    <div class="rowOptions btn-group pull-right">
      <button class="btn btn-default btn-xs dropdown-toggle" type="button" data-toggle="dropdown">
        <span class="caret" title="Editing options"></span>
      </button>
      <ul class="dropdown-menu">
        <li><a href="#" id="show-edit"><span class="glyphicon glyphicon-edit"></span> Edit</a></li>
        <li><a href="#" id="downloadTemplate"><span class="fa fa-download"></span> Download template</a></li>
      </ul>
    </div>
    {{filename}}</td>
  <td>{{tblType}}</td>
</template>

<template name="reportTemplateForm">
  <form id="reportTemplateForm" role="form" class="editForm">
    <div class="form-group row">
      <div class="col-xs-6">
        <label>Evidence type</label>
        {{> selectList options=getTblTypeOptions selectName="filename" selected=tblType}}
      </div>
      <div class="col-xs-6">
          <label>Report template (.DOCX)</label>
          <input type="file" name="filename">
          <p class="help-block">
            {{#if isNew }}
              Select the Word template for use.
            {{else}}
              Load a new report template to replace existing.
            {{/if}}
          </p>
      </div>
    </div>

    <div class="well well-sm pager">
      {{#if isNew }}
        <button type="button" class="btn btn-sm btn-primary" id="create"
                title="Create new">
          <span class="glyphicon glyphicon-ok"></span> Create</button>
        <button type="button" class="btn btn-sm btn-default" id="create-cancel"
                title="Cancel">Cancel</button>
      {{else}}
        <button type="button" class="btn btn-sm btn-primary" id="update" title="Save changes">
          <span class="glyphicon glyphicon-ok"></span> Save</button>
        <button type="button" class="btn btn-sm btn-default" id="update-cancel" title="Cancel changes">Cancel</button>
        <button type="button" class="btn btn-sm btn-danger"  id="delete" title="Delete row">
          <span class="glyphicon glyphicon-trash"></span></button>
      {{/if}}
    </div>
  </form>
</template>
