<head>
  <title>iarc</title>
</head>

<body>
    <div class="container">
        <table class="table table-striped table-condensed">
            {{> refs_thead}}
            {{> refs_tbody}}
        </table>
        {{> refs_newform}}
    </div>
</body>

<template name="refs_thead">
    <thead>
        <tr>
            <th rowspan="2">Test system</th>
            <th rowspan="2">Substance tested</th>
            <th colspan="2">Results</th>
            <th rowspan="2">Reference</th>
            <th rowspan="2">Comment</th>
            <th rowspan="2">Settings</th>
        </tr>
        <tr>
            <th>Without exogenous<br>metabolic activation</th>
            <th>With exogenous<br>metabolic activation</th>
        </tr>
    </thead>
</template>

<template name="refs_tbody">
    <tbody>
        {{#each references}}
            {{#if show_row }}
                <tr class="{{isDisplayClass}}">
                    {{#if editing}}
                        <td colspan="100">
                            {{> refs_form}}
                        </td>
                    {{else}}
                        <td>{{test_system}}</td>
                        <td>{{substance_tested}}</td>
                        <td>{{result_without}}</td>
                        <td>{{result_with}}</td>
                        <td>{{comment}}</td>
                        <td>{{reference}}</td>
                        <td>
                            <button title="Edit text" class="btn btn-sm btn-default" id="citation-select-edit"><span class="glyphicon glyphicon-edit"></span></button>
                            <button title="Move up" class="btn btn-sm btn-default" id="citation-move-up"><span class="glyphicon glyphicon-arrow-up"></span></button>
                            <button title="Move down" class="btn btn-sm btn-default" id="citation-move-down"><span class="glyphicon glyphicon-arrow-down"></span></button>
                        </td>
                    {{/if}}
                </tr>
            {{/if}}
        {{/each}}
    </tbody>
</template>

<template name="refs_form">
    <form role="form">
        <div class="form-group">
            <label>Test System</label>
            <input class="form-control" name='test_system' type="text" value="{{test_system}}"/>
        </div>
        <div class="form-group">
            <label>Substance Tested</label>
            <input class="form-control" name='substance_tested' type="text" value="{{substance_tested}}"/>
        </div>
        <div class="form-group">
            <label>Result Without</label>
            <input class="form-control" name='result_without' type="text" value="{{result_without}}" placeholder='Should be one of the following: +, -, NT'/>
        </div>
        <div class="form-group">
            <label>Result With</label>
            <input class="form-control" name='result_with' type="text" value="{{result_with}}" placeholder='Should be one of the following: +, -, NT'/>
        </div>
        <div class="form-group">
            <label>Comment</label>
            <input class="form-control" name='comment' type="text" value="{{comment}}"/>
        </div>
        <div class="form-group">
            <label>Reference</label>
            <input class="form-control" name='reference' type="text" value="{{reference}}"/>
        </div>
        <div class="checkbox">
            <label>Display</label>
            <input name='_display' type="checkbox" {{isDisplay}} />
        </div>
        {{#if _id}}
            <button type="button" class="btn btn-sm btn-primary" id="save-settings" title="Save changes"><span class="glyphicon glyphicon-ok"> Save</span></button>
            <button type="button" class="btn btn-sm btn-default" id="cancel-save" title="Cancel changes">Cancel</button>
            <button type="button" class="btn btn-sm btn-danger"  id="delete" title="Delete row"><span class="glyphicon glyphicon-trash"></span></button>
        {{else}}
            <button type="button" class="btn btn-sm btn-primary" id="create-new" title="Save new"><span class="glyphicon glyphicon-ok"> Create</span></button>
            <button type="button" class="btn btn-sm btn-default" id="cancel-new" title="Cancel">Cancel</button>
        {{/if}}
    </form>
</template>

<template name="refs_newform">

    <div class="btn-group">
      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" role="menu">
        <li><a href="#" id="show-all-rows">Toggle show all rows</a></li>
      </ul>
    </div>

    {{#if show_new}}
        {{>refs_form}}
    {{else}}
        <button id="display_form" class="btn btn-small btn-primary">Add</button>
    {{/if}}
</template>
